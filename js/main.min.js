const ranks=[{name:"Herald",mmr:[0,154,308,462,616]},{name:"Guardian",mmr:[770,924,1078,1232,1386]},{name:"Crusader",mmr:[1540,1694,1848,2002,2156]},{name:"Archon",mmr:[2310,2464,2618,2772,2926]},{name:"Legend",mmr:[3080,3234,3388,3542,3696]},{name:"Ancient",mmr:[3850,4004,4158,4312,4466]},{name:"Divine",mmr:[4620,4820,5020,5220,5420]},{name:"Immortal",mmr:[5620]}],form=document.querySelector(".form"),input=document.querySelector(".mmr-input"),rankInfo=document.querySelector(".rank-info"),invalidSpan=document.createElement("span");function updateRankInfo(e,n,t,m){if(document.querySelector(".current-rank-name").textContent=`${e.name} ${e.mmr<5620?romanize(e.level):""}`,document.querySelector(".current-rank-mmr").textContent=`${e.mmr} MMR`,document.querySelector(".current-rank-image").src=`./img/${e.name.toLowerCase()}${"Immortal"===e.name?"":"-"+e.level}.webp`,document.querySelector(".form-subtitle").classList.add("hidden"),"Immortal"===e.name)document.querySelector(".next-rank").classList.add("hidden"),document.querySelector(".next-medal").classList.add("hidden"),document.querySelector(".current-rank").classList.add("immortal"),document.querySelector(".next-rank-info-your-mmr").textContent=`You have ${m} MMR`,document.querySelector(".next-rank-info-next-mmr").classList.add("hidden"),document.querySelector(".next-rank-info-mmr-needed").textContent="You're already immortal, wtf are you doing here?",document.querySelector(".next-rank-info-games-needed").classList.add("hidden"),document.querySelector(".next-medal-info-next-mmr").classList.add("hidden"),document.querySelector(".next-medal-info-mmr-needed").classList.add("hidden"),document.querySelector(".next-medal-info-games-needed").classList.add("hidden");else{document.querySelector(".next-rank").classList.remove("hidden"),document.querySelector(".next-medal").classList.remove("hidden"),document.querySelector(".current-rank").classList.remove("immortal"),document.querySelector(".next-rank-info-next-mmr").classList.remove("hidden"),document.querySelector(".next-rank-info-games-needed").classList.remove("hidden"),document.querySelector(".next-rank-name").textContent=`${n.name} ${e.mmr<5420?romanize(n.level):""}`,document.querySelector(".next-rank-mmr").textContent=`${n.mmr} MMR`,document.querySelector(".next-rank-image").src=`./img/${n.name.toLowerCase()}-${n.level}.webp`,"Immortal"===n.name&&"Immortal"===t.name?(document.querySelector(".next-medal").classList.add("hidden"),document.querySelector(".next-rank").style.gridColumn="span 2",document.querySelector(".next-rank-title").textContent="The last dances",document.querySelector(".next-medal-info-next-mmr").classList.add("hidden"),document.querySelector(".next-medal-info-mmr-needed").classList.add("hidden"),document.querySelector(".next-medal-info-games-needed").classList.add("hidden")):(document.querySelector(".next-medal").classList.remove("hidden"),document.querySelector(".next-medal-info-next-mmr").classList.remove("hidden"),document.querySelector(".next-medal-info-mmr-needed").classList.remove("hidden"),document.querySelector(".next-medal-info-games-needed").classList.remove("hidden"),document.querySelector(".next-rank").style.gridColumn="unset",document.querySelector(".next-rank-title").textContent="Next rank",document.querySelector(".next-medal-name").textContent=`${t.name} ${"Divine"!==e.name?romanize(t.level):""}`,document.querySelector(".next-medal-mmr").textContent=`${t.mmr} MMR`,document.querySelector(".next-medal-image").src=`./img/${t.name.toLowerCase()}-${t.level}.webp`);const r=n.mmr-m;document.querySelector(".next-rank-info-your-mmr").textContent=`You have ${m} MMR`,document.querySelector(".next-rank-info-next-mmr").textContent=`${n.name} ${e.mmr<5420?romanize(n.level):""} starts at ${n.mmr} MMR`,document.querySelector(".next-rank-info-mmr-needed").innerHTML=`You need <span>${r} MMR</span> to be <span>${n.name} ${e.mmr<5420?romanize(n.level):""}</span>`,document.querySelector(".next-rank-info-games-needed").innerHTML=`You need approx <span>${Math.ceil(r/25)} wins</span> to be <span>${n.name} ${e.mmr<5420?romanize(n.level):""}</span>`;const a=t.mmr-m;document.querySelector(".next-medal-info-next-mmr").textContent=`${t.name} ${e.mmr<5420?romanize(t.level):""} starts at ${t.mmr} MMR`,document.querySelector(".next-medal-info-mmr-needed").innerHTML=`You need <span>${a} MMR</span> to be <span>${t.name} ${"Divine"!==e.name?romanize(t.level):""}</span>`,document.querySelector(".next-medal-info-games-needed").innerHTML=`You need approx <span>${Math.ceil(a/25)} wins</span> to be <span>${t.name} ${"Divine"!==e.name?romanize(t.level):""}</span>`}rankInfo.classList.remove("hidden")}function romanize(e){return["I","II","III","IV","V"][e-1]}invalidSpan.classList.add("invalid-mmr"),invalidSpan.textContent="MMR must be a valid number. (No dots, no commas)",form.addEventListener("submit",(function(e){e.preventDefault();const n=input.value.trim();if(!/^[0-9]+$/.test(n))return input.nextElementSibling&&input.nextElementSibling.classList.contains("invalid-mmr")||input.insertAdjacentElement("afterend",invalidSpan),rankInfo.classList.add("hidden"),void document.querySelector(".form-subtitle").classList.remove("hidden");input.nextElementSibling&&input.nextElementSibling.classList.contains("invalid-mmr")&&input.nextElementSibling.remove();const t=parseInt(n,10);let m=null,r=null,a=null;for(let e=0;e<ranks.length;e++)for(let n=0;n<ranks[e].mmr.length;n++)t>=ranks[e].mmr[n]&&(m={name:ranks[e].name,level:n+1,mmr:ranks[e].mmr[n]},r=ranks[e].mmr[n+1]?{name:ranks[e].name,level:n+2,mmr:ranks[e].mmr[n+1]}:ranks[e+1]?{name:ranks[e+1].name,level:1,mmr:ranks[e+1].mmr[0]}:null,a=r&&1===r.level&&"Immortal"!==r.name?ranks[e+2]?{name:ranks[e+2].name,level:1,mmr:ranks[e+2].mmr[0]}:null:ranks[e+1]?{name:ranks[e+1].name,level:1,mmr:ranks[e+1].mmr[0]}:null);t>=6500&&(m={name:"Immortal",level:null,mmr:t},r=null),updateRankInfo(m,r,a,t)}));